{"version":3,"sources":["../../../../../modules/@angular/compiler/src/view_compiler/lifecycle_binder.ts"],"names":[],"mappings":"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","file":"lifecycle_binder.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {CompileDirectiveSummary, CompilePipeSummary} from '../compile_metadata';\nimport {isFirstViewCheck} from '../compiler_util/binding_util';\nimport {DirectiveWrapperExpressions} from '../directive_wrapper_compiler';\nimport * as o from '../output/output_ast';\nimport {LifecycleHooks} from '../private_import_core';\nimport {DirectiveAst, ProviderAst, ProviderAstType} from '../template_parser/template_ast';\n\nimport {CompileElement} from './compile_element';\nimport {CompileView} from './compile_view';\n/**\n * @param {?} directiveMeta\n * @param {?} directiveInstance\n * @param {?} compileElement\n * @return {?}\n */\nexport function bindDirectiveAfterContentLifecycleCallbacks(\n    directiveMeta: CompileDirectiveSummary, directiveInstance: o.Expression,\n    compileElement: CompileElement) {\n  const /** @type {?} */ view = compileElement.view;\n  const /** @type {?} */ lifecycleHooks = directiveMeta.type.lifecycleHooks;\n  const /** @type {?} */ afterContentLifecycleCallbacksMethod = view.afterContentLifecycleCallbacksMethod;\n  afterContentLifecycleCallbacksMethod.resetDebugInfo(\n      compileElement.nodeIndex, compileElement.sourceAst);\n  if (lifecycleHooks.indexOf(LifecycleHooks.AfterContentInit) !== -1) {\n    afterContentLifecycleCallbacksMethod.addStmt(new o.IfStmt(\n        isFirstViewCheck(o.THIS_EXPR),\n        [directiveInstance.callMethod('ngAfterContentInit', []).toStmt()]));\n  }\n  if (lifecycleHooks.indexOf(LifecycleHooks.AfterContentChecked) !== -1) {\n    afterContentLifecycleCallbacksMethod.addStmt(\n        directiveInstance.callMethod('ngAfterContentChecked', []).toStmt());\n  }\n}\n/**\n * @param {?} directiveMeta\n * @param {?} directiveInstance\n * @param {?} compileElement\n * @return {?}\n */\nexport function bindDirectiveAfterViewLifecycleCallbacks(\n    directiveMeta: CompileDirectiveSummary, directiveInstance: o.Expression,\n    compileElement: CompileElement) {\n  const /** @type {?} */ view = compileElement.view;\n  const /** @type {?} */ lifecycleHooks = directiveMeta.type.lifecycleHooks;\n  const /** @type {?} */ afterViewLifecycleCallbacksMethod = view.afterViewLifecycleCallbacksMethod;\n  afterViewLifecycleCallbacksMethod.resetDebugInfo(\n      compileElement.nodeIndex, compileElement.sourceAst);\n  if (lifecycleHooks.indexOf(LifecycleHooks.AfterViewInit) !== -1) {\n    afterViewLifecycleCallbacksMethod.addStmt(new o.IfStmt(\n        isFirstViewCheck(o.THIS_EXPR),\n        [directiveInstance.callMethod('ngAfterViewInit', []).toStmt()]));\n  }\n  if (lifecycleHooks.indexOf(LifecycleHooks.AfterViewChecked) !== -1) {\n    afterViewLifecycleCallbacksMethod.addStmt(\n        directiveInstance.callMethod('ngAfterViewChecked', []).toStmt());\n  }\n}\n/**\n * @param {?} dir\n * @param {?} directiveWrapperIntance\n * @param {?} compileElement\n * @return {?}\n */\nexport function bindDirectiveWrapperLifecycleCallbacks(\n    dir: DirectiveAst, directiveWrapperIntance: o.Expression, compileElement: CompileElement) {\n  compileElement.view.destroyMethod.addStmts(\n      DirectiveWrapperExpressions.ngOnDestroy(dir.directive, directiveWrapperIntance));\n  compileElement.view.detachMethod.addStmts(DirectiveWrapperExpressions.ngOnDetach(\n      dir.hostProperties, directiveWrapperIntance, o.THIS_EXPR,\n      compileElement.compViewExpr || o.THIS_EXPR, compileElement.renderNode));\n}\n/**\n * @param {?} provider\n * @param {?} providerInstance\n * @param {?} compileElement\n * @return {?}\n */\nexport function bindInjectableDestroyLifecycleCallbacks(\n    provider: ProviderAst, providerInstance: o.Expression, compileElement: CompileElement) {\n  const /** @type {?} */ onDestroyMethod = compileElement.view.destroyMethod;\n  onDestroyMethod.resetDebugInfo(compileElement.nodeIndex, compileElement.sourceAst);\n  if (provider.providerType !== ProviderAstType.Directive &&\n      provider.providerType !== ProviderAstType.Component &&\n      provider.lifecycleHooks.indexOf(LifecycleHooks.OnDestroy) !== -1) {\n    onDestroyMethod.addStmt(providerInstance.callMethod('ngOnDestroy', []).toStmt());\n  }\n}\n/**\n * @param {?} pipeMeta\n * @param {?} pipeInstance\n * @param {?} view\n * @return {?}\n */\nexport function bindPipeDestroyLifecycleCallbacks(\n    pipeMeta: CompilePipeSummary, pipeInstance: o.Expression, view: CompileView) {\n  const /** @type {?} */ onDestroyMethod = view.destroyMethod;\n  if (pipeMeta.type.lifecycleHooks.indexOf(LifecycleHooks.OnDestroy) !== -1) {\n    onDestroyMethod.addStmt(pipeInstance.callMethod('ngOnDestroy', []).toStmt());\n  }\n}\n"]}