{"version":3,"sources":["../../../../../../modules/@angular/compiler/src/i18n/serializers/serializer.ts"],"names":[],"mappings":"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","file":"serializer.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport * as i18n from '../i18n_ast';\n/**\n * @abstract\n */\nexport abstract class Serializer {\n/**\n * @abstract\n * @param {?} messages\n * @return {?}\n */\nwrite(messages: i18n.Message[]) {}\n/**\n * @abstract\n * @param {?} content\n * @param {?} url\n * @return {?}\n */\nload(content: string, url: string) {}\n/**\n * @abstract\n * @param {?} message\n * @return {?}\n */\ndigest(message: i18n.Message) {}\n/**\n * @param {?} message\n * @return {?}\n */\ncreateNameMapper(message: i18n.Message): PlaceholderMapper { return null; }\n}\n\n/**\n * A `PlaceholderMapper` converts placeholder names from internal to serialized representation and\n * back.\n *\n * It should be used for serialization format that put constraints on the placeholder names.\n */\nexport interface PlaceholderMapper {\n  toPublicName(internalName: string): string;\n\n  toInternalName(publicName: string): string;\n}\n/**\n * A simple mapper that take a function to transform an internal name to a public name\n */\nexport class SimplePlaceholderMapper extends i18n.RecurseVisitor implements PlaceholderMapper {\nprivate internalToPublic: {[k: string]: string} = {};\nprivate publicToNextId: {[k: string]: number} = {};\nprivate publicToInternal: {[k: string]: string} = {};\n/**\n * @param {?} message\n * @param {?} mapName\n */\nconstructor(message: i18n.Message,\nprivate mapName: (name: string) => string) {\n    super();\n    message.nodes.forEach(node => node.visit(this));\n  }\n/**\n * @param {?} internalName\n * @return {?}\n */\ntoPublicName(internalName: string): string {\n    return this.internalToPublic.hasOwnProperty(internalName) ?\n        this.internalToPublic[internalName] :\n        null;\n  }\n/**\n * @param {?} publicName\n * @return {?}\n */\ntoInternalName(publicName: string): string {\n    return this.publicToInternal.hasOwnProperty(publicName) ? this.publicToInternal[publicName] :\n                                                              null;\n  }\n/**\n * @param {?} text\n * @param {?=} context\n * @return {?}\n */\nvisitText(text: i18n.Text, context?: any): any { return null; }\n/**\n * @param {?} ph\n * @param {?=} context\n * @return {?}\n */\nvisitTagPlaceholder(ph: i18n.TagPlaceholder, context?: any): any {\n    this.visitPlaceholderName(ph.startName);\n    super.visitTagPlaceholder(ph, context);\n    this.visitPlaceholderName(ph.closeName);\n  }\n/**\n * @param {?} ph\n * @param {?=} context\n * @return {?}\n */\nvisitPlaceholder(ph: i18n.Placeholder, context?: any): any { this.visitPlaceholderName(ph.name); }\n/**\n * @param {?} ph\n * @param {?=} context\n * @return {?}\n */\nvisitIcuPlaceholder(ph: i18n.IcuPlaceholder, context?: any): any {\n    this.visitPlaceholderName(ph.name);\n  }\n/**\n * @param {?} internalName\n * @return {?}\n */\nprivate visitPlaceholderName(internalName: string): void {\n    if (!internalName || this.internalToPublic.hasOwnProperty(internalName)) {\n      return;\n    }\n\n    let /** @type {?} */ publicName = this.mapName(internalName);\n\n    if (this.publicToInternal.hasOwnProperty(publicName)) {\n      // Create a new XMB when it has already been used\n      const /** @type {?} */ nextId = this.publicToNextId[publicName];\n      this.publicToNextId[publicName] = nextId + 1;\n      publicName = `${publicName}_${nextId}`;\n    } else {\n      this.publicToNextId[publicName] = 1;\n    }\n\n    this.internalToPublic[internalName] = publicName;\n    this.publicToInternal[publicName] = internalName;\n  }\n}\n\nfunction SimplePlaceholderMapper_tsickle_Closure_declarations() {\n/** @type {?} */\nSimplePlaceholderMapper.prototype.internalToPublic;\n/** @type {?} */\nSimplePlaceholderMapper.prototype.publicToNextId;\n/** @type {?} */\nSimplePlaceholderMapper.prototype.publicToInternal;\n/** @type {?} */\nSimplePlaceholderMapper.prototype.mapName;\n}\n\n"]}