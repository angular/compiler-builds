{"version":3,"file":"summary_serializer.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/src/aot/summary_serializer.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {CompileNgModuleSummary, CompileSummaryKind, CompileTypeSummary} from '../compile_metadata';\nimport {Summary, SummaryResolver} from '../summary_resolver';\nimport {ValueTransformer, visitValue} from '../util';\n\nimport {StaticSymbol, StaticSymbolCache} from './static_symbol';\nimport {ResolvedStaticSymbol, StaticSymbolResolver} from './static_symbol_resolver';\n/**\n * @param {?} summaryResolver\n * @param {?} symbolResolver\n * @param {?} symbols\n * @param {?} types\n * @return {?}\n */\nexport function serializeSummaries(\n    summaryResolver: SummaryResolver<StaticSymbol>, symbolResolver: StaticSymbolResolver,\n    symbols: ResolvedStaticSymbol[], types: CompileTypeSummary[]):\n    {json: string, exportAs: {symbol: StaticSymbol, exportAs: string}[]} {\n  const /** @type {?} */ serializer = new Serializer(symbolResolver, summaryResolver);\n\n  // for symbols, we use everything except for the class metadata itself\n  // (we keep the statics though), as the class metadata is contained in the\n  // CompileTypeSummary.\n  symbols.forEach(\n      (resolvedSymbol) => serializer.addOrMergeSummary(\n          {symbol: resolvedSymbol.symbol, metadata: resolvedSymbol.metadata}));\n  // Add summaries that are referenced by the given symbols (transitively)\n  // Note: the serializer.symbols array might be growing while\n  // we execute the loop!\n  for (let /** @type {?} */ processedIndex = 0; processedIndex < serializer.symbols.length; processedIndex++) {\n    const /** @type {?} */ symbol = serializer.symbols[processedIndex];\n    if (summaryResolver.isLibraryFile(symbol.filePath)) {\n      let /** @type {?} */ summary = summaryResolver.resolveSummary(symbol);\n      if (!summary) {\n        // some symbols might originate from a plain typescript library\n        // that just exported .d.ts and .metadata.json files, i.e. where no summary\n        // files were created.\n        const /** @type {?} */ resolvedSymbol = symbolResolver.resolveSymbol(symbol);\n        if (resolvedSymbol) {\n          summary = {symbol: resolvedSymbol.symbol, metadata: resolvedSymbol.metadata};\n        }\n      }\n      if (summary) {\n        serializer.addOrMergeSummary(summary);\n      }\n    }\n  }\n\n  // Add type summaries.\n  // Note: We don't add the summaries of all referenced symbols as for the ResolvedSymbols,\n  // as the type summaries already contain the transitive data that they require\n  // (in a minimal way).\n  types.forEach((typeSummary) => {\n    serializer.addOrMergeSummary(\n        {symbol: typeSummary.type.reference, metadata: {__symbolic: 'class'}, type: typeSummary});\n    if (typeSummary.summaryKind === CompileSummaryKind.NgModule) {\n      const /** @type {?} */ ngModuleSummary = /** @type {?} */(( <CompileNgModuleSummary>typeSummary));\n      ngModuleSummary.exportedDirectives.concat(ngModuleSummary.exportedPipes).forEach((id) => {\n        const /** @type {?} */ symbol: StaticSymbol = id.reference;\n        if (summaryResolver.isLibraryFile(symbol.filePath)) {\n          const /** @type {?} */ summary = summaryResolver.resolveSummary(symbol);\n          if (summary) {\n            serializer.addOrMergeSummary(summary);\n          }\n        }\n      });\n    }\n  });\n  return serializer.serialize();\n}\n/**\n * @param {?} symbolCache\n * @param {?} json\n * @return {?}\n */\nexport function deserializeSummaries(symbolCache: StaticSymbolCache, json: string):\n    {summaries: Summary<StaticSymbol>[], importAs: {symbol: StaticSymbol, importAs: string}[]} {\n  const /** @type {?} */ deserializer = new Deserializer(symbolCache);\n  return deserializer.deserialize(json);\n}\nclass Serializer extends ValueTransformer {\n  // Note: This only contains symbols without members.\n  symbols: StaticSymbol[] = [];\nprivate indexBySymbol = new Map<StaticSymbol, number>();\nprivate processedSummaryBySymbol = new Map<StaticSymbol, any>();\nprivate processedSummaries: any[] = [];\n/**\n * @param {?} symbolResolver\n * @param {?} summaryResolver\n */\nconstructor(\nprivate symbolResolver: StaticSymbolResolver,\nprivate summaryResolver: SummaryResolver<StaticSymbol>) {\n    super();\n  }\n/**\n * @param {?} summary\n * @return {?}\n */\naddOrMergeSummary(summary: Summary<StaticSymbol>) {\n    let /** @type {?} */ symbolMeta = summary.metadata;\n    if (symbolMeta && symbolMeta.__symbolic === 'class') {\n      // For classes, we only keep their statics, but not the metadata\n      // of the class itself as that has been captured already via other summaries\n      // (e.g. DirectiveSummary, ...).\n      symbolMeta = {__symbolic: 'class', statics: symbolMeta.statics};\n    }\n\n    let /** @type {?} */ processedSummary = this.processedSummaryBySymbol.get(summary.symbol);\n    if (!processedSummary) {\n      processedSummary = this.processValue({symbol: summary.symbol});\n      this.processedSummaries.push(processedSummary);\n      this.processedSummaryBySymbol.set(summary.symbol, processedSummary);\n    }\n    // Note: == by purpose to compare with undefined!\n    if (processedSummary.metadata == null && symbolMeta != null) {\n      processedSummary.metadata = this.processValue(symbolMeta);\n    }\n    // Note: == by purpose to compare with undefined!\n    if (processedSummary.type == null && summary.type != null) {\n      processedSummary.type = this.processValue(summary.type);\n    }\n  }\n/**\n * @return {?}\n */\nserialize(): {json: string, exportAs: {symbol: StaticSymbol, exportAs: string}[]} {\n    const /** @type {?} */ exportAs: {symbol: StaticSymbol, exportAs: string}[] = [];\n    const /** @type {?} */ json = JSON.stringify({\n      summaries: this.processedSummaries,\n      symbols: this.symbols.map((symbol, index) => {\n        symbol.assertNoMembers();\n        let /** @type {?} */ importAs: string;\n        if (this.summaryResolver.isLibraryFile(symbol.filePath)) {\n          importAs = `${symbol.name}_${index}`;\n          exportAs.push({symbol, exportAs: importAs});\n        }\n        return {\n          __symbol: index,\n          name: symbol.name,\n          // We convert the source filenames tinto output filenames,\n          // as the generated summary file will be used when teh current\n          // compilation unit is used as a library\n          filePath: this.summaryResolver.getLibraryFileName(symbol.filePath),\n          importAs: importAs\n        };\n      })\n    });\n    return {json, exportAs};\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nprivate processValue(value: any): any { return visitValue(value, this, null); }\n/**\n * @param {?} value\n * @param {?} context\n * @return {?}\n */\nvisitOther(value: any, context: any): any {\n    if (value instanceof StaticSymbol) {\n      const /** @type {?} */ baseSymbol = this.symbolResolver.getStaticSymbol(value.filePath, value.name);\n      let /** @type {?} */ index = this.indexBySymbol.get(baseSymbol);\n      // Note: == by purpose to compare with undefined!\n      if (index == null) {\n        index = this.indexBySymbol.size;\n        this.indexBySymbol.set(baseSymbol, index);\n        this.symbols.push(baseSymbol);\n      }\n      return {__symbol: index, members: value.members};\n    }\n  }\n}\n\nfunction Serializer_tsickle_Closure_declarations() {\n/** @type {?} */\nSerializer.prototype.symbols;\n/** @type {?} */\nSerializer.prototype.indexBySymbol;\n/** @type {?} */\nSerializer.prototype.processedSummaryBySymbol;\n/** @type {?} */\nSerializer.prototype.processedSummaries;\n/** @type {?} */\nSerializer.prototype.symbolResolver;\n/** @type {?} */\nSerializer.prototype.summaryResolver;\n}\n\nclass Deserializer extends ValueTransformer {\nprivate symbols: StaticSymbol[];\n/**\n * @param {?} symbolCache\n */\nconstructor(private symbolCache: StaticSymbolCache) { super(); }\n/**\n * @param {?} json\n * @return {?}\n */\ndeserialize(json: string):\n      {summaries: Summary<StaticSymbol>[], importAs: {symbol: StaticSymbol, importAs: string}[]} {\n    const /** @type {?} */ data: {summaries: any[], symbols: any[]} = JSON.parse(json);\n    const /** @type {?} */ importAs: {symbol: StaticSymbol, importAs: string}[] = [];\n    this.symbols = [];\n    data.symbols.forEach((serializedSymbol) => {\n      const /** @type {?} */ symbol = this.symbolCache.get(serializedSymbol.filePath, serializedSymbol.name);\n      this.symbols.push(symbol);\n      if (serializedSymbol.importAs) {\n        importAs.push({symbol: symbol, importAs: serializedSymbol.importAs});\n      }\n    });\n    const /** @type {?} */ summaries = visitValue(data.summaries, this, null);\n    return {summaries, importAs};\n  }\n/**\n * @param {?} map\n * @param {?} context\n * @return {?}\n */\nvisitStringMap(map: {[key: string]: any}, context: any): any {\n    if ('__symbol' in map) {\n      const /** @type {?} */ baseSymbol = this.symbols[map['__symbol']];\n      const /** @type {?} */ members = map['members'];\n      return members.length ? this.symbolCache.get(baseSymbol.filePath, baseSymbol.name, members) :\n                              baseSymbol;\n    } else {\n      return super.visitStringMap(map, context);\n    }\n  }\n}\n\nfunction Deserializer_tsickle_Closure_declarations() {\n/** @type {?} */\nDeserializer.prototype.symbols;\n/** @type {?} */\nDeserializer.prototype.symbolCache;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}