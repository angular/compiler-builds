{"version":3,"sources":["../../../../../modules/@angular/compiler/src/animation/animation_compiler.ts"],"names":[],"mappings":"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","file":"animation_compiler.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nimport {isPresent} from '../facade/lang';\nimport {Identifiers, createIdentifier} from '../identifiers';\nimport * as o from '../output/output_ast';\nimport {ANY_STATE, DEFAULT_STATE, EMPTY_STATE} from '../private_import_core';\n\nimport {AnimationAst, AnimationAstVisitor, AnimationEntryAst, AnimationGroupAst, AnimationKeyframeAst, AnimationSequenceAst, AnimationStateDeclarationAst, AnimationStateTransitionAst, AnimationStateTransitionFnExpression, AnimationStepAst, AnimationStylesAst} from './animation_ast';\nexport class AnimationEntryCompileResult {\n/**\n * @param {?} name\n * @param {?} statements\n * @param {?} fnExp\n */\nconstructor(public name: string,\npublic statements: o.Statement[],\npublic fnExp: o.Expression) {}\n}\n\nfunction AnimationEntryCompileResult_tsickle_Closure_declarations() {\n/** @type {?} */\nAnimationEntryCompileResult.prototype.name;\n/** @type {?} */\nAnimationEntryCompileResult.prototype.statements;\n/** @type {?} */\nAnimationEntryCompileResult.prototype.fnExp;\n}\n\nexport class AnimationCompiler {\n/**\n * @param {?} factoryNamePrefix\n * @param {?} parsedAnimations\n * @return {?}\n */\ncompile(factoryNamePrefix: string, parsedAnimations: AnimationEntryAst[]):\n      AnimationEntryCompileResult[] {\n    return parsedAnimations.map(entry => {\n      const /** @type {?} */ factoryName = `${factoryNamePrefix}_${entry.name}`;\n      const /** @type {?} */ visitor = new _AnimationBuilder(entry.name, factoryName);\n      return visitor.build(entry);\n    });\n  }\n}\n\nconst /** @type {?} */ _ANIMATION_FACTORY_ELEMENT_VAR = o.variable('element');\nconst /** @type {?} */ _ANIMATION_DEFAULT_STATE_VAR = o.variable('defaultStateStyles');\nconst /** @type {?} */ _ANIMATION_FACTORY_VIEW_VAR = o.variable('view');\nconst /** @type {?} */ _ANIMATION_FACTORY_VIEW_CONTEXT = _ANIMATION_FACTORY_VIEW_VAR.prop('animationContext');\nconst /** @type {?} */ _ANIMATION_FACTORY_RENDERER_VAR = _ANIMATION_FACTORY_VIEW_VAR.prop('renderer');\nconst /** @type {?} */ _ANIMATION_CURRENT_STATE_VAR = o.variable('currentState');\nconst /** @type {?} */ _ANIMATION_NEXT_STATE_VAR = o.variable('nextState');\nconst /** @type {?} */ _ANIMATION_PLAYER_VAR = o.variable('player');\nconst /** @type {?} */ _ANIMATION_TIME_VAR = o.variable('totalTime');\nconst /** @type {?} */ _ANIMATION_START_STATE_STYLES_VAR = o.variable('startStateStyles');\nconst /** @type {?} */ _ANIMATION_END_STATE_STYLES_VAR = o.variable('endStateStyles');\nconst /** @type {?} */ _ANIMATION_COLLECTED_STYLES = o.variable('collectedStyles');\nconst /** @type {?} */ _PREVIOUS_ANIMATION_PLAYERS = o.variable('previousPlayers');\nconst /** @type {?} */ _EMPTY_MAP = o.literalMap([]);\nconst /** @type {?} */ _EMPTY_ARRAY = o.literalArr([]);\nclass _AnimationBuilder implements AnimationAstVisitor {\nprivate _fnVarName: string;\nprivate _statesMapVarName: string;\nprivate _statesMapVar: any;\n/**\n * @param {?} animationName\n * @param {?} factoryName\n */\nconstructor(public animationName: string, factoryName: string) {\n    this._fnVarName = factoryName + '_factory';\n    this._statesMapVarName = factoryName + '_states';\n    this._statesMapVar = o.variable(this._statesMapVarName);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationStyles(ast: AnimationStylesAst, context: _AnimationBuilderContext): o.Expression {\n    const /** @type {?} */ stylesArr: any[] = [];\n    if (context.isExpectingFirstStyleStep) {\n      stylesArr.push(_ANIMATION_START_STATE_STYLES_VAR);\n      context.isExpectingFirstStyleStep = false;\n    }\n\n    ast.styles.forEach(entry => {\n      const /** @type {?} */ entries =\n          Object.keys(entry).map((key): [string, o.Expression] => [key, o.literal(entry[key])]);\n      stylesArr.push(o.literalMap(entries, null, true));\n    });\n\n    return o.importExpr(createIdentifier(Identifiers.AnimationStyles)).instantiate([\n      o.importExpr(createIdentifier(Identifiers.collectAndResolveStyles)).callFn([\n        _ANIMATION_COLLECTED_STYLES, o.literalArr(stylesArr)\n      ])\n    ]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationKeyframe(ast: AnimationKeyframeAst, context: _AnimationBuilderContext):\n      o.Expression {\n    return o.importExpr(createIdentifier(Identifiers.AnimationKeyframe)).instantiate([\n      o.literal(ast.offset), ast.styles.visit(this, context)\n    ]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationStep(ast: AnimationStepAst, context: _AnimationBuilderContext): o.Expression {\n    if (context.endStateAnimateStep === ast) {\n      return this._visitEndStateAnimation(ast, context);\n    }\n\n    const /** @type {?} */ startingStylesExpr = ast.startingStyles.visit(this, context);\n    const /** @type {?} */ keyframeExpressions =\n        ast.keyframes.map(keyframeEntry => keyframeEntry.visit(this, context));\n    return this._callAnimateMethod(\n        ast, startingStylesExpr, o.literalArr(keyframeExpressions), context);\n  }\n/**\n * \\@internal\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\n_visitEndStateAnimation(ast: AnimationStepAst, context: _AnimationBuilderContext): o.Expression {\n    const /** @type {?} */ startingStylesExpr = ast.startingStyles.visit(this, context);\n    const /** @type {?} */ keyframeExpressions = ast.keyframes.map(keyframe => keyframe.visit(this, context));\n    const /** @type {?} */ keyframesExpr =\n        o.importExpr(createIdentifier(Identifiers.balanceAnimationKeyframes)).callFn([\n          _ANIMATION_COLLECTED_STYLES, _ANIMATION_END_STATE_STYLES_VAR,\n          o.literalArr(keyframeExpressions)\n        ]);\n\n    return this._callAnimateMethod(ast, startingStylesExpr, keyframesExpr, context);\n  }\n/**\n * \\@internal\n * @param {?} ast\n * @param {?} startingStylesExpr\n * @param {?} keyframesExpr\n * @param {?} context\n * @return {?}\n */\n_callAnimateMethod(\n      ast: AnimationStepAst, startingStylesExpr: any, keyframesExpr: any,\n      context: _AnimationBuilderContext) {\n    let /** @type {?} */ previousStylesValue: o.Expression = _EMPTY_ARRAY;\n    if (context.isExpectingFirstAnimateStep) {\n      previousStylesValue = _PREVIOUS_ANIMATION_PLAYERS;\n      context.isExpectingFirstAnimateStep = false;\n    }\n    context.totalTransitionTime += ast.duration + ast.delay;\n    return _ANIMATION_FACTORY_RENDERER_VAR.callMethod('animate', [\n      _ANIMATION_FACTORY_ELEMENT_VAR, startingStylesExpr, keyframesExpr, o.literal(ast.duration),\n      o.literal(ast.delay), o.literal(ast.easing), previousStylesValue\n    ]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationSequence(ast: AnimationSequenceAst, context: _AnimationBuilderContext):\n      o.Expression {\n    const /** @type {?} */ playerExprs = ast.steps.map(step => step.visit(this, context));\n    return o.importExpr(createIdentifier(Identifiers.AnimationSequencePlayer)).instantiate([\n      o.literalArr(playerExprs)\n    ]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationGroup(ast: AnimationGroupAst, context: _AnimationBuilderContext): o.Expression {\n    const /** @type {?} */ playerExprs = ast.steps.map(step => step.visit(this, context));\n    return o.importExpr(createIdentifier(Identifiers.AnimationGroupPlayer)).instantiate([\n      o.literalArr(playerExprs)\n    ]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationStateDeclaration(\n      ast: AnimationStateDeclarationAst, context: _AnimationBuilderContext): void {\n    const /** @type {?} */ flatStyles: {[key: string]: string | number} = {};\n    _getStylesArray(ast).forEach(\n        entry => { Object.keys(entry).forEach(key => { flatStyles[key] = entry[key]; }); });\n    context.stateMap.registerState(ast.stateName, flatStyles);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationStateTransition(\n      ast: AnimationStateTransitionAst, context: _AnimationBuilderContext): any {\n    const /** @type {?} */ steps = ast.animation.steps;\n    const /** @type {?} */ lastStep = steps[steps.length - 1];\n    if (_isEndStateAnimateStep(lastStep)) {\n      context.endStateAnimateStep = /** @type {?} */(( <AnimationStepAst>lastStep));\n    }\n\n    context.totalTransitionTime = 0;\n    context.isExpectingFirstStyleStep = true;\n    context.isExpectingFirstAnimateStep = true;\n\n    const /** @type {?} */ stateChangePreconditions: o.Expression[] = [];\n\n    ast.stateChanges.forEach(stateChange => {\n      if (stateChange instanceof AnimationStateTransitionFnExpression) {\n        stateChangePreconditions.push(o.importExpr({reference: stateChange.fn}).callFn([\n          _ANIMATION_CURRENT_STATE_VAR, _ANIMATION_NEXT_STATE_VAR\n        ]));\n      } else {\n        stateChangePreconditions.push(\n            _compareToAnimationStateExpr(_ANIMATION_CURRENT_STATE_VAR, stateChange.fromState)\n                .and(_compareToAnimationStateExpr(_ANIMATION_NEXT_STATE_VAR, stateChange.toState)));\n\n        if (stateChange.fromState != ANY_STATE) {\n          context.stateMap.registerState(stateChange.fromState);\n        }\n\n        if (stateChange.toState != ANY_STATE) {\n          context.stateMap.registerState(stateChange.toState);\n        }\n      }\n    });\n\n    const /** @type {?} */ animationPlayerExpr = ast.animation.visit(this, context);\n\n    const /** @type {?} */ reducedStateChangesPrecondition = stateChangePreconditions.reduce((a, b) => a.or(b));\n    const /** @type {?} */ precondition =\n        _ANIMATION_PLAYER_VAR.equals(o.NULL_EXPR).and(reducedStateChangesPrecondition);\n\n    const /** @type {?} */ animationStmt = _ANIMATION_PLAYER_VAR.set(animationPlayerExpr).toStmt();\n    const /** @type {?} */ totalTimeStmt = _ANIMATION_TIME_VAR.set(o.literal(context.totalTransitionTime)).toStmt();\n\n    return new o.IfStmt(precondition, [animationStmt, totalTimeStmt]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationEntry(ast: AnimationEntryAst, context: _AnimationBuilderContext): any {\n    // visit each of the declarations first to build the context state map\n    ast.stateDeclarations.forEach(def => def.visit(this, context));\n\n    // this should always be defined even if the user overrides it\n    context.stateMap.registerState(DEFAULT_STATE, {});\n\n    const /** @type {?} */ statements: o.Statement[] = [];\n    statements.push(_PREVIOUS_ANIMATION_PLAYERS\n                        .set(_ANIMATION_FACTORY_VIEW_CONTEXT.callMethod(\n                            'getAnimationPlayers',\n                            [\n                              _ANIMATION_FACTORY_ELEMENT_VAR,\n                              _ANIMATION_NEXT_STATE_VAR.equals(o.literal(EMPTY_STATE))\n                                  .conditional(o.NULL_EXPR, o.literal(this.animationName))\n                            ]))\n                        .toDeclStmt());\n\n    statements.push(_ANIMATION_COLLECTED_STYLES.set(_EMPTY_MAP).toDeclStmt());\n    statements.push(_ANIMATION_PLAYER_VAR.set(o.NULL_EXPR).toDeclStmt());\n    statements.push(_ANIMATION_TIME_VAR.set(o.literal(0)).toDeclStmt());\n\n    statements.push(\n        _ANIMATION_DEFAULT_STATE_VAR.set(this._statesMapVar.key(o.literal(DEFAULT_STATE)))\n            .toDeclStmt());\n\n    statements.push(\n        _ANIMATION_START_STATE_STYLES_VAR.set(this._statesMapVar.key(_ANIMATION_CURRENT_STATE_VAR))\n            .toDeclStmt());\n\n    statements.push(new o.IfStmt(\n        _ANIMATION_START_STATE_STYLES_VAR.equals(o.NULL_EXPR),\n        [_ANIMATION_START_STATE_STYLES_VAR.set(_ANIMATION_DEFAULT_STATE_VAR).toStmt()]));\n\n    statements.push(\n        _ANIMATION_END_STATE_STYLES_VAR.set(this._statesMapVar.key(_ANIMATION_NEXT_STATE_VAR))\n            .toDeclStmt());\n\n    statements.push(new o.IfStmt(\n        _ANIMATION_END_STATE_STYLES_VAR.equals(o.NULL_EXPR),\n        [_ANIMATION_END_STATE_STYLES_VAR.set(_ANIMATION_DEFAULT_STATE_VAR).toStmt()]));\n\n    const /** @type {?} */ RENDER_STYLES_FN = o.importExpr(createIdentifier(Identifiers.renderStyles));\n\n    ast.stateTransitions.forEach(transAst => statements.push(transAst.visit(this, context)));\n\n    // this check ensures that the animation factory always returns a player\n    // so that the onDone callback can be used for tracking\n    statements.push(new o.IfStmt(\n        _ANIMATION_PLAYER_VAR.equals(o.NULL_EXPR),\n        [_ANIMATION_PLAYER_VAR\n             .set(o.importExpr(createIdentifier(Identifiers.NoOpAnimationPlayer)).instantiate([]))\n             .toStmt()]));\n\n    // once complete we want to apply the styles on the element\n    // since the destination state's values should persist once\n    // the animation sequence has completed.\n    statements.push(\n        _ANIMATION_PLAYER_VAR\n            .callMethod(\n                'onDone',\n                [o\n                     .fn([],\n                         [\n                           _ANIMATION_PLAYER_VAR.callMethod('destroy', []).toStmt(),\n                           RENDER_STYLES_FN\n                               .callFn([\n                                 _ANIMATION_FACTORY_ELEMENT_VAR, _ANIMATION_FACTORY_RENDERER_VAR,\n                                 o.importExpr(\n                                      createIdentifier(Identifiers.prepareFinalAnimationStyles))\n                                     .callFn(\n                                         [\n                                           _ANIMATION_START_STATE_STYLES_VAR,\n                                           _ANIMATION_END_STATE_STYLES_VAR\n                                         ])\n                               ])\n                               .toStmt()\n                         ])])\n            .toStmt());\n\n    statements.push(o.importExpr(createIdentifier(Identifiers.AnimationSequencePlayer))\n                        .instantiate([_PREVIOUS_ANIMATION_PLAYERS])\n                        .callMethod('destroy', [])\n                        .toStmt());\n\n    // before we start any animation we want to clear out the starting\n    // styles from the element's style property (since they were placed\n    // there at the end of the last animation\n    statements.push(RENDER_STYLES_FN\n                        .callFn([\n                          _ANIMATION_FACTORY_ELEMENT_VAR, _ANIMATION_FACTORY_RENDERER_VAR,\n                          o.importExpr(createIdentifier(Identifiers.clearStyles))\n                              .callFn([_ANIMATION_START_STATE_STYLES_VAR])\n                        ])\n                        .toStmt());\n\n    statements.push(_ANIMATION_FACTORY_VIEW_CONTEXT\n                        .callMethod(\n                            'queueAnimation',\n                            [\n                              _ANIMATION_FACTORY_ELEMENT_VAR, o.literal(this.animationName),\n                              _ANIMATION_PLAYER_VAR\n                            ])\n                        .toStmt());\n\n    statements.push(new o.ReturnStatement(\n        o.importExpr(createIdentifier(Identifiers.AnimationTransition)).instantiate([\n          _ANIMATION_PLAYER_VAR, _ANIMATION_FACTORY_ELEMENT_VAR, o.literal(this.animationName),\n          _ANIMATION_CURRENT_STATE_VAR, _ANIMATION_NEXT_STATE_VAR, _ANIMATION_TIME_VAR\n        ])));\n\n    return o.fn(\n        [\n          new o.FnParam(\n              _ANIMATION_FACTORY_VIEW_VAR.name,\n              o.importType(createIdentifier(Identifiers.AppView), [o.DYNAMIC_TYPE])),\n          new o.FnParam(_ANIMATION_FACTORY_ELEMENT_VAR.name, o.DYNAMIC_TYPE),\n          new o.FnParam(_ANIMATION_CURRENT_STATE_VAR.name, o.DYNAMIC_TYPE),\n          new o.FnParam(_ANIMATION_NEXT_STATE_VAR.name, o.DYNAMIC_TYPE)\n        ],\n        statements, o.importType(createIdentifier(Identifiers.AnimationTransition)));\n  }\n/**\n * @param {?} ast\n * @return {?}\n */\nbuild(ast: AnimationAst): AnimationEntryCompileResult {\n    const /** @type {?} */ context = new _AnimationBuilderContext();\n    const /** @type {?} */ fnStatement = ast.visit(this, context).toDeclStmt(this._fnVarName);\n    const /** @type {?} */ fnVariable = o.variable(this._fnVarName);\n\n    const /** @type {?} */ lookupMap: any[] = [];\n    Object.keys(context.stateMap.states).forEach(stateName => {\n      const /** @type {?} */ value = context.stateMap.states[stateName];\n      let /** @type {?} */ variableValue = _EMPTY_MAP;\n      if (isPresent(value)) {\n        const /** @type {?} */ styleMap: any[] = [];\n        Object.keys(value).forEach(key => { styleMap.push([key, o.literal(value[key])]); });\n        variableValue = o.literalMap(styleMap, null, true);\n      }\n      lookupMap.push([stateName, variableValue]);\n    });\n\n    const /** @type {?} */ compiledStatesMapStmt =\n        this._statesMapVar.set(o.literalMap(lookupMap, null, true)).toDeclStmt();\n    const /** @type {?} */ statements: o.Statement[] = [compiledStatesMapStmt, fnStatement];\n\n    return new AnimationEntryCompileResult(this.animationName, statements, fnVariable);\n  }\n}\n\nfunction _AnimationBuilder_tsickle_Closure_declarations() {\n/** @type {?} */\n_AnimationBuilder.prototype._fnVarName;\n/** @type {?} */\n_AnimationBuilder.prototype._statesMapVarName;\n/** @type {?} */\n_AnimationBuilder.prototype._statesMapVar;\n/** @type {?} */\n_AnimationBuilder.prototype.animationName;\n}\n\nclass _AnimationBuilderContext {\n  stateMap = new _AnimationBuilderStateMap();\n  endStateAnimateStep: AnimationStepAst = null;\n  isExpectingFirstStyleStep = false;\n  isExpectingFirstAnimateStep = false;\n  totalTransitionTime = 0;\n}\n\nfunction _AnimationBuilderContext_tsickle_Closure_declarations() {\n/** @type {?} */\n_AnimationBuilderContext.prototype.stateMap;\n/** @type {?} */\n_AnimationBuilderContext.prototype.endStateAnimateStep;\n/** @type {?} */\n_AnimationBuilderContext.prototype.isExpectingFirstStyleStep;\n/** @type {?} */\n_AnimationBuilderContext.prototype.isExpectingFirstAnimateStep;\n/** @type {?} */\n_AnimationBuilderContext.prototype.totalTransitionTime;\n}\n\nclass _AnimationBuilderStateMap {\nprivate _states: {[key: string]: {[prop: string]: string | number}} = {};\n/**\n * @return {?}\n */\nget states() { return this._states; }\n/**\n * @param {?} name\n * @param {?=} value\n * @return {?}\n */\nregisterState(name: string, value: {[prop: string]: string | number} = null): void {\n    const /** @type {?} */ existingEntry = this._states[name];\n    if (!existingEntry) {\n      this._states[name] = value;\n    }\n  }\n}\n\nfunction _AnimationBuilderStateMap_tsickle_Closure_declarations() {\n/** @type {?} */\n_AnimationBuilderStateMap.prototype._states;\n}\n\n/**\n * @param {?} value\n * @param {?} animationState\n * @return {?}\n */\nfunction _compareToAnimationStateExpr(value: o.Expression, animationState: string): o.Expression {\n  const /** @type {?} */ emptyStateLiteral = o.literal(EMPTY_STATE);\n  switch (animationState) {\n    case EMPTY_STATE:\n      return value.equals(emptyStateLiteral);\n\n    case ANY_STATE:\n      return o.literal(true);\n\n    default:\n      return value.equals(o.literal(animationState));\n  }\n}\n/**\n * @param {?} step\n * @return {?}\n */\nfunction _isEndStateAnimateStep(step: AnimationAst): boolean {\n  // the final animation step is characterized by having only TWO\n  // keyframe values and it must have zero styles for both keyframes\n  if (step instanceof AnimationStepAst && step.duration > 0 && step.keyframes.length == 2) {\n    const /** @type {?} */ styles1 = _getStylesArray(step.keyframes[0])[0];\n    const /** @type {?} */ styles2 = _getStylesArray(step.keyframes[1])[0];\n    return Object.keys(styles1).length === 0 && Object.keys(styles2).length === 0;\n  }\n  return false;\n}\n/**\n * @param {?} obj\n * @return {?}\n */\nfunction _getStylesArray(obj: any): {[key: string]: any}[] {\n  return obj.styles.styles;\n}\n"]}